setthreadcontext(2)
local plrs = game:GetService("Players")
local cas = game:GetService("ContextActionService")
local rep = game:GetService("ReplicatedStorage")
local rs = game:GetService("RunService")
local uis = game:GetService("UserInputService")
local plr = plrs.LocalPlayer
local core = require(rep.Core)
local chars = rep.Characters
local char = plr.Data.Character
local toggle = false

local function wallcombo()
    local head = plr.Character and plr.Character:FindFirstChild("Head")
    if not head then return end

    local res = core.Get("Combat","Hit").Box(nil, plr.Character, {Size = Vector3.new(50,50,50)})
    if res then
        local success, err = pcall(core.Get("Combat","Ability").Activate, chars[char.Value].WallCombo, res, head.Position + Vector3.new(0,0,2.5))
        print(success, err)
    end
    -- add cooldown here, you can do task.wait(0.1) or smth if u want slower
end

-- K TUÅžU DÃœZELTMESÄ° - ContextActionService YERÄ°NE UserInputService
uis.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed or input.KeyCode ~= Enum.KeyCode.K then return end
    
    toggle = not toggle
    if toggle then
        rs:BindToRenderStep("WallCombo", Enum.RenderPriority.Input.Value, wallcombo)
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "ðŸŸ£ OP WALL COMBO",
            Text = "AKTÄ°F!",
            Duration = 2
        })
    else
        rs:UnbindFromRenderStep("WallCombo")
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "ðŸŸ£ OP WALL COMBO",
            Text = "PASÄ°F!",
            Duration = 2
        })
    end
end)